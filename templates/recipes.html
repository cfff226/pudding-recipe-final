{% extends "base.html" %}
{% block content %}
<h1>Recipes</h1>
<!-- Search bar for recipes -->
<div class="container-fluid">
    <div class="wrapper">
        <form action="{{ url_for('search') }}" method="POST" class="col s12">
            <div class="input-field col s12">
                <input id="search" name="search" type="search" required />
                <label class="label-icon" for="search"><i class="material-icons"></i></label>
                <i class="material-icons">CLOSE</i>
            </div>
            <!-- Search and Clear buttons -->
            <div class="col s12 small-btns">
                <a href="{{ url_for('get_recipes') }}" class="waves-effect waves-light btn-clear">CLEAR</a>
                <button type="submit" class="btn submit-btn">"SEARCH"</button>
            </div>
        </form>
    </div>
</div>



<!-- Display all recipes -->
<!-- If the amount of recipes is greater than 0 -->
<div class="row">
    {% if recipes|length > 0 %}
    <!-- For loop to display all recipes from mongodb -->
    {% for recipe in recipes %}
    <div class="col sm6">
        <div class="card" style="width: auto;">
            <img src="{{ recipe.dessert_image }}" class="card-img-top" alt="an image of {{ recipe.dessert_name }}">
            <div class="card-body">
                <h5 class="card-title">{{ recipe.dessert_name }}</h5>
                <br>
                <!-- For loop to loop through ingredients -->
                <h5>Ingredients</h5>
                {% for ingredient in recipe.dessert_ingredients %}
                <p>{{ ingredient }}</p>
                <!-- Close loop -->
                {% endfor %}
                <!-- For loop to loop through instructions -->
                <h5>Instructions</h5>
                {% for instruction in recipe.dessert_instructions %}
                <p>{{ instruction }}</p>
                <!-- Close loop -->
                {% endfor %}
                <p>
                    <em>Created by: {{ recipe.created_by }}</em>
                </p>
                <br>
                <!-- Edit button for existing recipe -->
                {% if session.user|lower == recipe.created_by|lower %}
                <a href="{{ url_for('edit_recipe', recipes_id=recipe._id ) }}" class="btn btn-primary btn-lg active"
                    role="button" aria-pressed="true">EDIT</a>
                <a href="{{ url_for('edit_recipe', recipes_id=recipe._id ) }}" class="btn btn-primary btn-lg active"
                    role="button" aria-pressed="true">DELETE</a>
                {% endif %}
            </div>
        </div>
    </div>
    {% endfor %}
    {% endif %}
</div>
{% endblock %}